<dx-toolbar id="toolbar" class="py-3 px-5 border-b bg-gray-100">
  <!-- REFAC: Refactor items into ui components. -->
  <dxi-item
    widget="dxButton"
    location="before"
    [options]="menuButtonOpts"
  ></dxi-item>
  <dxi-item
    class="text-sm"
    cssClass="italic font-medium pr-2 tracking-tight"
    text="âœˆFlights"
    location="before"
  ></dxi-item>
  <dxi-item
    *ngIf="user$ | async as user; else loginButtonTpl"
    location="after"
    locateInMenu="auto"
    menuItemTemplate="menuItem"
  >
    <div *dxTemplate="let data of 'item'">
      <dx-button
        class="user-button authorization"
        width="210px"
        height="100%"
        stylingMode="text"
      >
        <div *dxTemplate="let data of 'content'">
          <div class="user-panel">
            <div class="user-info">
              <div class="image-container">
                <img
                  class="user-avatar"
                  [src]="'https://www.gravatar.com/wavatar/' + user?.hash"
                />
              </div>
              <div class="user-name">{{ user?.email }}</div>
            </div>
            <dx-context-menu
              [items]="userMenuItems"
              target=".user-button"
              showEvent="dxclick"
              width="210px"
              [position]="{
                my: 'top',
                at: 'bottom'
              }"
              cssClass="user-menu"
            >
            </dx-context-menu>
            <dx-list class="dx-toolbar-menu-action" [items]="userMenuItems">
            </dx-list>
          </div>
        </div>
      </dx-button>
    </div>
  </dxi-item>
</dx-toolbar>

<ng-template #loginButtonTpl>
  <dx-button width="210px" height="100%" stylingMode="text" text="Log in">
  </dx-button>
</ng-template>
